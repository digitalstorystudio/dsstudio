<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ticket Verification | Dandiya Night 2025</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#3498db">
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üîç</text></svg>">
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <div class="logo">
                    <span class="logo-icon">üîç</span>
                    <h1>Ticket Verification</h1>
                </div>
                <button id="logoutBtn" class="logout-btn">
                    <span>üö™</span> Logout
                </button>
            </div>
            <p class="subtitle">Scan QR codes or verify tickets manually</p>
        </header>

        <main>
            <!-- QR Scanner Section -->
            <div class="scanner-section">
                <div class="scanner-header">
                    <h3>
                        <span class="section-icon">üì±</span>
                        QR Code Scanner
                    </h3>
                    <div class="scanner-controls">
                        <button id="toggleCamera" class="control-btn">
                            <span id="cameraIcon">üìπ</span>
                            <span id="cameraText">Start Camera</span>
                        </button>
                        <button id="switchCamera" class="control-btn hidden">
                            <span>üîÑ</span> Switch Camera
                        </button>
                    </div>
                </div>
                
                <div class="scanner-container">
                    <div id="qr-reader" class="qr-reader"></div>
                    <div id="scannerStatus" class="scanner-status">
                        <p>Click "Start Camera" to begin scanning</p>
                    </div>
                </div>
            </div>

            <!-- Manual Verification Section -->
            <div class="divider">
                <span>OR</span>
            </div>

            <div class="manual-section">
                <div class="manual-header">
                    <h3>
                        <span class="section-icon">‚å®Ô∏è</span>
                        Manual Verification
                    </h3>
                </div>
                
                <form id="verifyForm" class="verify-form">
                    <div class="form-group">
                        <label for="manualId">
                            <span class="label-icon">üé´</span>
                            Enter Ticket ID
                        </label>
                        <div class="input-container">
                            <input 
                                type="text" 
                                id="manualId" 
                                placeholder="e.g., EVENT-ABC123DE" 
                                pattern="EVENT-[A-Z0-9]{5,10}"
                                title="Format: EVENT-XXXXX"
                                required
                            >
                            <button type="submit" class="verify-btn">
                                <span>üîç</span> Verify
                            </button>
                        </div>
                    </div>
                </form>
            </div>

            <!-- Verification Result -->
            <div id="verificationResult" class="verification-result hidden">
                <div class="result-content">
                    <div class="result-header">
                        <div class="result-icon" id="resultIcon"></div>
                        <div class="result-text">
                            <h3 id="resultTitle"></h3>
                            <p id="resultMessage"></p>
                        </div>
                    </div>
                    
                    <div class="result-details" id="resultDetails"></div>
                    
                    <div class="result-timestamp" id="resultTimestamp"></div>
                </div>
            </div>

            <!-- Statistics Dashboard -->
            <div class="stats-section">
                <h3>
                    <span class="section-icon">üìä</span>
                    Today's Statistics
                </h3>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">‚úÖ</div>
                        <div class="stat-content">
                            <div class="stat-number" id="verifiedCount">0</div>
                            <div class="stat-label">Verified</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚ùå</div>
                        <div class="stat-content">
                            <div class="stat-number" id="rejectedCount">0</div>
                            <div class="stat-label">Rejected</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚ö†Ô∏è</div>
                        <div class="stat-content">
                            <div class="stat-number" id="duplicateCount">0</div>
                            <div class="stat-label">Duplicates</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üïê</div>
                        <div class="stat-content">
                            <div class="stat-number" id="totalCount">0</div>
                            <div class="stat-label">Total Checks</div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Floating Action Button for Quick Actions -->
        <div class="fab-container">
            <button id="fabMain" class="fab">
                <span>‚ö°</span>
            </button>
            <div class="fab-menu hidden">
                <button class="fab-item" onclick="clearResults()">
                    <span>üóëÔ∏è</span> Clear Results
                </button>
                <button class="fab-item" onclick="exportStats()">
                    <span>üìä</span> Export Stats
                </button>
                <button class="fab-item" onclick="refreshStats()">
                    <span>üîÑ</span> Refresh
                </button>
            </div>
        </div>
    </div>

    <!-- Toast Notifications Container -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- Scripts -->
    <script src="https://unpkg.com/html5-qrcode/html5-qrcode.min.js"></script>
    <script>
        document.addEventListener('contextmenu', event => event.preventDefault());
    </script>
    <script src="verify.js"></script>
</body>
</html>